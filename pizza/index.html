<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>üçï –ö–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä –ø–∏—Ü—Ü—ã –¥–ª—è –∞—ç—Ä–æ–≥—Ä–∏–ª—è</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        :root {
            --pizza-red: #DC143C;
            --dough-yellow: #FFD700;
            --cheese-yellow: #FFEBCD;
            --herb-green: #228B22;
            --dark: #2D2A26;
            --light-bg: #FFF9F0;
            --card-bg: #FFFFFF;
            --shadow: 0 10px 30px rgba(0, 0, 0, 0.08);
            --oven-gradient: linear-gradient(45deg, #8B4513, #D2691E);
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background-color: var(--light-bg);
            color: var(--dark);
            line-height: 1.6;
            padding: 20px;
            max-width: 1400px;
            margin: 0 auto;
            min-height: 100vh;
        }
        
        .header-pizza {
            height: 20px;
            background: repeating-linear-gradient(
                90deg,
                var(--pizza-red) 0px 30px,
                var(--dough-yellow) 30px 60px,
                var(--herb-green) 60px 90px
            );
            border-radius: 10px 10px 0 0;
            margin-bottom: -5px;
        }
        
        header {
            text-align: center;
            margin-bottom: 30px;
            padding: 30px;
            background: var(--card-bg);
            border-radius: 0 0 20px 20px;
            box-shadow: var(--shadow);
            position: relative;
            overflow: hidden;
        }
        
        h1 {
            font-size: 2.8rem;
            margin-bottom: 10px;
            color: var(--dark);
            position: relative;
            display: inline-block;
        }
        
        h1::before {
            content: "üçï";
            margin-right: 15px;
            font-size: 2.5rem;
        }
        
        .subtitle {
            font-size: 1.3rem;
            margin-bottom: 25px;
            color: var(--dark);
            max-width: 600px;
            margin: 0 auto 25px;
        }
        
        /* –ì–æ—Ç–æ–≤—ã–µ –Ω–∞–±–æ—Ä—ã –ø–∏—Ü—Ü */
        .pizza-presets {
            background: var(--card-bg);
            padding: 25px;
            border-radius: 15px;
            box-shadow: var(--shadow);
            margin: 20px 0;
            border: 2px solid #eee;
        }
        
        .presets-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 15px;
            margin-top: 20px;
        }
        
        .preset-card {
            background: #f9f9f9;
            border-radius: 10px;
            padding: 20px;
            cursor: pointer;
            transition: all 0.3s;
            border: 2px solid #eee;
            position: relative;
            overflow: hidden;
        }
        
        .preset-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 20px rgba(0,0,0,0.1);
            border-color: var(--pizza-red);
        }
        
        .preset-card.active {
            background: rgba(220, 20, 60, 0.1);
            border-color: var(--pizza-red);
        }
        
        .preset-name {
            font-weight: bold;
            font-size: 1.2rem;
            color: var(--pizza-red);
            margin-bottom: 10px;
        }
        
        .preset-description {
            font-size: 0.9rem;
            color: #666;
            margin-bottom: 15px;
        }
        
        .preset-details {
            font-size: 0.85rem;
            color: #777;
        }
        
        /* –û—Å–Ω–æ–≤–Ω—ã–µ –≤—ã–±–æ—Ä—ã */
        .main-choices {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin: 20px 0;
        }
        
        .choice-card {
            background: var(--card-bg);
            padding: 25px;
            border-radius: 15px;
            box-shadow: var(--shadow);
            transition: all 0.3s;
            border: 2px solid #eee;
        }
        
        .choice-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 15px 30px rgba(0, 0, 0, 0.1);
            border-color: var(--pizza-red);
        }
        
        .choice-card h3 {
            color: var(--pizza-red);
            margin-bottom: 20px;
            display: flex;
            align-items: center;
            gap: 10px;
            padding-bottom: 10px;
            border-bottom: 2px solid var(--dough-yellow);
        }
        
        .options-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(140px, 1fr));
            gap: 12px;
            margin-top: 15px;
        }
        
        .option-btn {
            padding: 15px;
            background: #f9f9f9;
            border: 2px solid #ddd;
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.3s;
            text-align: center;
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 8px;
            font-weight: 600;
        }
        
        .option-btn:hover {
            background: #fff;
            transform: translateY(-3px);
        }
        
        .option-btn.active {
            background: var(--pizza-red);
            color: white;
            border-color: var(--pizza-red);
            box-shadow: 0 5px 15px rgba(220, 20, 60, 0.2);
        }
        
        /* –û–±–Ω–æ–≤–ª–µ–Ω–Ω—ã–π –≤—ã–±–æ—Ä —Å—ã—Ä–∞ */
        .cheese-selection {
            margin: 15px 0;
        }
        
        .cheese-options {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            margin-top: 10px;
        }
        
        .cheese-option {
            display: flex;
            align-items: center;
            gap: 8px;
            padding: 10px 15px;
            background: #f9f9f9;
            border-radius: 8px;
            border: 2px solid #ddd;
            cursor: pointer;
            transition: all 0.3s;
        }
        
        .cheese-option:hover {
            background: #fff;
            transform: translateY(-2px);
        }
        
        .cheese-option.selected {
            background: rgba(255, 215, 0, 0.2);
            border-color: var(--dough-yellow);
        }
        
        .cheese-option input[type="checkbox"] {
            width: 18px;
            height: 18px;
            accent-color: var(--dough-yellow);
        }
        
        /* –°–ª–∞–π–¥–µ—Ä—ã */
        .slider-container {
            margin: 20px 0;
        }
        
        .slider-header {
            display: flex;
            justify-content: space-between;
            margin-bottom: 10px;
            font-weight: 600;
        }
        
        input[type="range"] {
            width: 100%;
            height: 12px;
            -webkit-appearance: none;
            background: #eee;
            border-radius: 10px;
            outline: none;
        }
        
        input[type="range"]::-webkit-slider-thumb {
            -webkit-appearance: none;
            width: 28px;
            height: 28px;
            border-radius: 50%;
            background: var(--pizza-red);
            cursor: pointer;
            border: 3px solid white;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.2);
        }
        
        .slider-value {
            font-size: 1.8rem;
            font-weight: bold;
            text-align: center;
            margin: 10px 0;
            color: var(--pizza-red);
        }
        
        /* –î–≤—É—Ö—ç—Ç–∞–ø–Ω–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è */
        .two-stage-instruction {
            background: linear-gradient(135deg, rgba(255, 215, 0, 0.1), rgba(139, 69, 19, 0.1));
            border-radius: 15px;
            padding: 25px;
            margin: 30px 0;
            border: 2px dashed var(--dough-yellow);
        }
        
        .stage {
            margin-bottom: 25px;
            padding-bottom: 25px;
            border-bottom: 2px dashed rgba(139, 69, 19, 0.3);
        }
        
        .stage:last-child {
            margin-bottom: 0;
            padding-bottom: 0;
            border-bottom: none;
        }
        
        .stage-header {
            display: flex;
            align-items: center;
            gap: 15px;
            margin-bottom: 15px;
            color: var(--pizza-red);
            font-weight: bold;
            font-size: 1.2rem;
        }
        
        .stage-number {
            background: var(--oven-gradient);
            color: white;
            width: 36px;
            height: 36px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            font-size: 1.2rem;
        }
        
        /* –¢–∞–π–º–µ—Ä—ã */
        .timer-container {
            display: flex;
            justify-content: center;
            align-items: center;
            margin: 20px 0;
            gap: 15px;
            flex-wrap: wrap;
        }
        
        .timer-item {
            background-color: var(--card-bg);
            color: var(--dark);
            padding: 18px 25px;
            border-radius: 15px;
            text-align: center;
            min-width: 160px;
            transition: transform 0.3s;
            border: 2px solid #eee;
            box-shadow: var(--shadow);
        }
        
        .timer-item:hover {
            transform: translateY(-8px);
            border-color: var(--pizza-red);
        }
        
        .timer-value {
            font-size: 2.2rem;
            font-weight: bold;
            color: var(--pizza-red);
        }
        
        /* –û—Å–Ω–æ–≤–Ω–æ–π –∫–æ–Ω—Ç–µ–Ω—Ç */
        .container {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 30px;
            margin-top: 30px;
        }
        
        @media (max-width: 1100px) {
            .container {
                grid-template-columns: 1fr;
            }
        }
        
        .card {
            background-color: var(--card-bg);
            border-radius: 20px;
            padding: 30px;
            box-shadow: var(--shadow);
            transition: transform 0.4s;
            border: 2px solid #eee;
        }
        
        .card:hover {
            transform: translateY(-10px);
            border-color: var(--pizza-red);
        }
        
        .card h2 {
            color: var(--pizza-red);
            margin-bottom: 20px;
            padding-bottom: 15px;
            border-bottom: 3px solid var(--dough-yellow);
            display: flex;
            align-items: center;
        }
        
        /* –°–ø–∏—Å–∫–∏ */
        .ingredients-list, .steps-list {
            list-style-type: none;
        }
        
        .ingredients-list li, .steps-list li {
            padding: 14px 0;
            border-bottom: 1px dashed #eee;
            display: flex;
            align-items: center;
            transition: all 0.3s;
        }
        
        .ingredients-list li:hover, .steps-list li:hover {
            background-color: rgba(220, 20, 60, 0.05);
            border-radius: 8px;
            padding-left: 10px;
            padding-right: 10px;
        }
        
        .ingredient-checkbox {
            margin-right: 15px;
            width: 22px;
            height: 22px;
            cursor: pointer;
            accent-color: var(--pizza-red);
        }
        
        .ingredient-amount {
            font-weight: bold;
            color: var(--pizza-red);
            min-width: 100px;
        }
        
        .step-number {
            background-color: var(--pizza-red);
            color: white;
            width: 36px;
            height: 36px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-right: 15px;
            font-weight: bold;
            flex-shrink: 0;
        }
        
        .step-detail {
            margin-top: 10px;
            padding: 10px 15px;
            background: #f9f9f9;
            border-radius: 8px;
            border-left: 3px solid var(--herb-green);
            font-size: 0.9rem;
        }
        
        .step-detail strong {
            color: var(--herb-green);
            display: block;
            margin-bottom: 5px;
        }
        
        .measurement-detail {
            background: rgba(255, 215, 0, 0.1);
            padding: 8px 12px;
            border-radius: 6px;
            margin: 5px 0;
            border-left: 3px solid var(--dough-yellow);
        }
        
        .cutting-instruction {
            background: rgba(34, 139, 34, 0.05);
            padding: 10px;
            margin: 8px 0;
            border-radius: 6px;
            font-size: 0.9rem;
            border-left: 3px solid var(--herb-green);
        }
        
        /* –ü—Ä–æ–≥—Ä–µ—Å—Å */
        .progress-summary {
            margin-top: 25px;
            padding: 20px;
            background-color: rgba(220, 20, 60, 0.1);
            border-radius: 15px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .progress-bar {
            width: 100%;
            height: 12px;
            background-color: #ddd;
            border-radius: 6px;
            overflow: hidden;
            margin-bottom: 8px;
        }
        
        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, var(--pizza-red), var(--dough-yellow));
            width: 0%;
            transition: width 0.7s;
        }
        
        /* –ö–Ω–æ–ø–∫–∏ */
        .reset-btn, .print-btn, .dough-recipe-btn {
            display: block;
            margin: 25px auto 0;
            padding: 14px 30px;
            background-color: var(--pizza-red);
            color: white;
            border: none;
            border-radius: 50px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s;
            display: flex;
            align-items: center;
            gap: 10px;
            justify-content: center;
        }
        
        .reset-btn:hover, .print-btn:hover, .dough-recipe-btn:hover {
            background-color: #b01030;
            transform: translateY(-3px);
            box-shadow: 0 10px 20px rgba(220, 20, 60, 0.3);
        }
        
        .dough-recipe-btn {
            background-color: var(--herb-green);
        }
        
        .dough-recipe-btn:hover {
            background-color: #1a6b1a;
        }
        
        /* –§—É—Ç–µ—Ä */
        footer {
            text-align: center;
            margin-top: 50px;
            padding-top: 25px;
            border-top: 2px solid #eee;
            color: #777;
            font-size: 0.9rem;
        }
        
        /* –ê–¥–∞–ø—Ç–∏–≤–Ω–æ—Å—Ç—å */
        @media (max-width: 768px) {
            .main-choices, .presets-grid {
                grid-template-columns: 1fr;
            }
            
            .options-grid {
                grid-template-columns: repeat(auto-fill, minmax(120px, 1fr));
            }
            
            h1 {
                font-size: 2.2rem;
            }
        }
    </style>
</head>
<body>
    <!-- –®–∞–ø–∫–∞ —Å –ø–∏—Ü—Ü–µ–π -->
    <div class="header-pizza"></div>
    
    <header>
        <div class="header-content">
            <h1>–ö–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä –ø–∏—Ü—Ü—ã –¥–ª—è –∞—ç—Ä–æ–≥—Ä–∏–ª—è</h1>
            <p class="subtitle">–°–æ–∑–¥–∞–π—Ç–µ –∏–¥–µ–∞–ª—å–Ω—É—é –ø–∏—Ü—Ü—É —Å –¥–≤—É—Ö—ç—Ç–∞–ø–Ω—ã–º –ø—Ä–∏–≥–æ—Ç–æ–≤–ª–µ–Ω–∏–µ–º –≤ –∞—ç—Ä–æ–≥—Ä–∏–ª–µ</p>
            
            <!-- –ì–æ—Ç–æ–≤—ã–µ –Ω–∞–±–æ—Ä—ã –ø–∏—Ü—Ü -->
            <div class="pizza-presets">
                <h3><i class="fas fa-star"></i> –ì–æ—Ç–æ–≤—ã–µ –Ω–∞–±–æ—Ä—ã –ø–∏—Ü—Ü</h3>
                <div class="presets-grid" id="pizza-presets">
                    <!-- –ó–∞–ø–æ–ª–Ω–∏—Ç—Å—è JavaScript -->
                </div>
            </div>
            
            <!-- –û—Å–Ω–æ–≤–Ω—ã–µ –≤—ã–±–æ—Ä—ã -->
            <div class="main-choices">
                <!-- –í—ã–±–æ—Ä —Ç–µ—Å—Ç–∞ -->
                <div class="choice-card">
                    <h3><i class="fas fa-bread-slice"></i> –¢–∏–ø —Ç–µ—Å—Ç–∞</h3>
                    <div class="options-grid" id="doughType">
                        <button class="option-btn" data-type="yeast" data-dough="fresh">
                            <div>ü•ñ –î—Ä–æ–∂–∂–µ–≤–æ–µ</div>
                            <small>–ö–ª–∞—Å—Å–∏—á–µ—Å–∫–æ–µ</small>
                        </button>
                        <button class="option-btn" data-type="puff" data-dough="fresh">
                            <div>ü•ê –°–ª–æ–µ–Ω–æ–µ</div>
                            <small>–í–æ–∑–¥—É—à–Ω–æ–µ</small>
                        </button>
                        <button class="option-btn active" data-type="store" data-dough="store">
                            <div>üõí –ì–æ—Ç–æ–≤–æ–µ</div>
                            <small>–ö—É–ø–ª–µ–Ω–Ω–æ–µ</small>
                        </button>
                    </div>
                </div>
                
                <!-- –í—ã–±–æ—Ä —Ä–∞–∑–º–µ—Ä–∞ -->
                <div class="choice-card">
                    <h3><i class="fas fa-ruler-combined"></i> –†–∞–∑–º–µ—Ä –ø–∏—Ü—Ü—ã</h3>
                    <div class="slider-container">
                        <div class="slider-header">
                            <span>–ú–∞–ª–µ–Ω—å–∫–∞—è</span>
                            <span>–ë–æ–ª—å—à–∞—è</span>
                        </div>
                        <input type="range" id="size-slider" min="20" max="35" value="30" step="5">
                        <div class="slider-value" id="size-value">30 —Å–º</div>
                        <div style="text-align: center; color: #666; font-size: 0.9rem;">
                            <span id="portion-count">3-4 –ø–æ—Ä—Ü–∏–∏</span>
                        </div>
                    </div>
                </div>
                
                <!-- –í—ã–±–æ—Ä —Å–æ—É—Å–∞ -->
                <div class="choice-card">
                    <h3><i class="fas fa-mortar-pestle"></i> –û—Å–Ω–æ–≤–∞ –∏ —Å–æ—É—Å</h3>
                    <div class="options-grid" id="sauceType">
                        <button class="option-btn active" data-sauce="tomato">
                            <div>üçÖ –¢–æ–º–∞—Ç–Ω—ã–π</div>
                            <small>–ö–ª–∞—Å—Å–∏–∫–∞</small>
                        </button>
                        <button class="option-btn" data-sauce="cream">
                            <div>ü•õ –°–ª–∏–≤–æ—á–Ω—ã–π</div>
                            <small>–ù–µ–∂–Ω—ã–π</small>
                        </button>
                        <button class="option-btn" data-sauce="pesto">
                            <div>üåø –ü–µ—Å—Ç–æ</div>
                            <small>–ê—Ä–æ–º–∞—Ç–Ω—ã–π</small>
                        </button>
                    </div>
                </div>
            </div>
            
            <!-- –î–≤—É—Ö—ç—Ç–∞–ø–Ω–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è -->
            <div class="two-stage-instruction">
                <div class="stage">
                    <div class="stage-header">
                        <div class="stage-number">1</div>
                        <div>–ó–∞–ø–µ–∫–∞–µ–º –æ—Å–Ω–æ–≤—É</div>
                    </div>
                    <p>–¢–µ—Å—Ç–æ –≥–æ—Ç–æ–≤–∏—Ç—Å—è –æ—Ç–¥–µ–ª—å–Ω–æ <strong>5-7 –º–∏–Ω—É—Ç</strong> –ø—Ä–∏ <strong>180¬∞C</strong> –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –ø—Ä–æ—á–Ω–æ–π –æ—Å–Ω–æ–≤—ã</p>
                </div>
                <div class="stage">
                    <div class="stage-header">
                        <div class="stage-number">2</div>
                        <div>–î–æ–±–∞–≤–ª—è–µ–º –Ω–∞—á–∏–Ω–∫—É</div>
                    </div>
                    <p>–ü–∏—Ü—Ü–∞ —Å –Ω–∞—á–∏–Ω–∫–æ–π –∑–∞–ø–µ–∫–∞–µ—Ç—Å—è <strong>8-12 –º–∏–Ω—É—Ç</strong> –ø—Ä–∏ <strong>200¬∞C</strong> –¥–æ –∑–æ–ª–æ—Ç–∏—Å—Ç–æ–π –∫–æ—Ä–æ—á–∫–∏</p>
                </div>
            </div>
            
            <!-- –¢–∞–π–º–µ—Ä—ã -->
            <div class="timer-container">
                <div class="timer-item">
                    <div class="timer-value" id="dough-time">5-7 –º–∏–Ω</div>
                    <div class="timer-label">1 —ç—Ç–∞–ø: –æ—Å–Ω–æ–≤–∞</div>
                </div>
                <div class="timer-item">
                    <div class="timer-value" id="pizza-time">8-12 –º–∏–Ω</div>
                    <div class="timer-label">2 —ç—Ç–∞–ø: —Å –Ω–∞—á–∏–Ω–∫–æ–π</div>
                </div>
                <div class="timer-item">
                    <div class="timer-value" id="cost-total">~0 —Ä—É–±</div>
                    <div class="timer-label">–û–±—â–∞—è —Å—Ç–æ–∏–º–æ—Å—Ç—å</div>
                </div>
            </div>
        </div>
    </header>
    
    <!-- –û—Å–Ω–æ–≤–Ω–æ–π –∫–æ–Ω—Ç–µ–Ω—Ç -->
    <div class="container">
        <!-- –õ–µ–≤–∞—è –∫–∞—Ä—Ç–æ—á–∫–∞: –ò–Ω–≥—Ä–µ–¥–∏–µ–Ω—Ç—ã -->
        <div class="card">
            <h2><i class="fas fa-shopping-cart"></i> –°–ø–∏—Å–æ–∫ –ø–æ–∫—É–ø–æ–∫</h2>
            
            <div class="progress-summary">
                <div style="font-weight: bold;">
                    <span>–ö—É–ø–ª–µ–Ω–æ:</span>
                    <span style="color: var(--pizza-red); font-size: 1.2rem;" id="bought-count">0</span>
                    <span>–∏–∑</span>
                    <span id="total-ingredients">0</span>
                </div>
                <div style="width: 60%;">
                    <div class="progress-bar">
                        <div class="progress-fill" id="progress-fill"></div>
                    </div>
                    <div style="font-size: 0.85rem; text-align: center;">
                        <span id="progress-percent">0%</span> –≥–æ—Ç–æ–≤–æ
                    </div>
                </div>
            </div>
            
            <!-- –û—Å–Ω–æ–≤–Ω—ã–µ –∏–Ω–≥—Ä–µ–¥–∏–µ–Ω—Ç—ã -->
            <div style="margin-top: 20px;">
                <h3 style="color: var(--pizza-red); margin-bottom: 15px;">
                    <i class="fas fa-pizza-slice"></i> –û—Å–Ω–æ–≤–∞ –∏ —Å–æ—É—Å
                </h3>
                <ul class="ingredients-list" id="base-ingredients">
                    <!-- –ó–∞–ø–æ–ª–Ω–∏—Ç—Å—è JavaScript -->
                </ul>
            </div>
            
            <!-- –°—ã—Ä -->
            <div style="margin-top: 25px;">
                <h3 style="color: var(--pizza-red); margin-bottom: 15px;">
                    <i class="fas fa-cheese"></i> –°—ã—Ä
                </h3>
                <div class="cheese-selection" id="cheese-selection">
                    <!-- –ó–∞–ø–æ–ª–Ω–∏—Ç—Å—è JavaScript -->
                </div>
                <ul class="ingredients-list" id="cheese-ingredients">
                    <!-- –ó–∞–ø–æ–ª–Ω–∏—Ç—Å—è JavaScript -->
                </ul>
            </div>
            
            <!-- –ù–∞—á–∏–Ω–∫–∞ -->
            <div style="margin-top: 25px;">
                <h3 style="color: var(--pizza-red); margin-bottom: 15px;">
                    <i class="fas fa-bacon"></i> –ù–∞—á–∏–Ω–∫–∞
                </h3>
                <div id="toppings-container">
                    <!-- –ó–∞–ø–æ–ª–Ω–∏—Ç—Å—è JavaScript -->
                </div>
            </div>
            
            <button class="reset-btn" id="reset-list">
                <i class="fas fa-redo"></i> –°–±—Ä–æ—Å–∏—Ç—å —Å–ø–∏—Å–æ–∫ –ø–æ–∫—É–ø–æ–∫
            </button>
        </div>
        
        <!-- –ü—Ä–∞–≤–∞—è –∫–∞—Ä—Ç–æ—á–∫–∞: –ü—Ä–∏–≥–æ—Ç–æ–≤–ª–µ–Ω–∏–µ -->
        <div class="card">
            <h2><i class="fas fa-utensil-spoon"></i> –ü–æ—à–∞–≥–æ–≤–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è</h2>
            
            <!-- –®–∞–≥–∏ –±—É–¥—É—Ç –∑–¥–µ—Å—å -->
            <ul class="steps-list" id="steps-list">
                <!-- –ó–∞–ø–æ–ª–Ω–∏—Ç—Å—è JavaScript -->
            </ul>
            
            <div style="margin-top: 30px; padding: 20px; background: #f9f9f9; border-radius: 10px; border-left: 5px solid var(--dough-yellow);">
                <p><strong><i class="fas fa-lightbulb"></i> –°–æ–≤–µ—Ç:</strong> –ù–∞–∂–º–∏—Ç–µ –Ω–∞ –∑–Ω–∞—á–æ–∫ —Ç–∞–π–º–µ—Ä–∞ <i class="fas fa-hourglass-half"></i> —Ä—è–¥–æ–º —Å —à–∞–≥–æ–º, —á—Ç–æ–±—ã –∑–∞–ø—É—Å—Ç–∏—Ç—å —Ç–∞–π–º–µ—Ä –¥–ª—è —ç—Ç–æ–≥–æ —ç—Ç–∞–ø–∞.</p>
            </div>
        </div>
    </div>
    
    <!-- –§—É—Ç–µ—Ä -->
    <footer>
        <p>
            <i class="fas fa-thermometer-half"></i> –ê—ç—Ä–æ–≥—Ä–∏–ª—å —Å –æ–¥–Ω–∏–º —Ç—ç–Ω–æ–º | 
            <i class="fas fa-hourglass-half"></i> –î–≤—É—Ö—ç—Ç–∞–ø–Ω–æ–µ –ø—Ä–∏–≥–æ—Ç–æ–≤–ª–µ–Ω–∏–µ | 
            <i class="fas fa-pizza-slice"></i> –ò–¥–µ–∞–ª—å–Ω–∞—è –ø–∏—Ü—Ü–∞ –¥–æ–º–∞
        </p>
        <p style="margin-top: 10px;">–í—Å–µ –∏–Ω–≥—Ä–µ–¥–∏–µ–Ω—Ç—ã –¥–æ—Å—Ç—É–ø–Ω—ã –≤ —Ä–æ—Å—Å–∏–π—Å–∫–∏—Ö –º–∞–≥–∞–∑–∏–Ω–∞—Ö</p>
        <a href="javascript:window.print();" class="print-btn">
            <i class="fas fa-print"></i> –†–∞—Å–ø–µ—á–∞—Ç–∞—Ç—å —Ä–µ—Ü–µ–ø—Ç
        </a>
    </footer>

    <!-- JavaScript -->
    <script>
        // –ë–ê–ó–ê –î–ê–ù–ù–´–• –ü–ò–¶–¶–´
        const pizzaData = {
            // –ì–æ—Ç–æ–≤—ã–µ –Ω–∞–±–æ—Ä—ã –ø–∏—Ü—Ü
            pizzaPresets: [
                {
                    id: "fourCheese",
                    name: "4 —Å—ã—Ä–∞",
                    description: "–ö–ª–∞—Å—Å–∏—á–µ—Å–∫–∞—è –ø–∏—Ü—Ü–∞ —Å —á–µ—Ç—ã—Ä—å–º—è –≤–∏–¥–∞–º–∏ —Å—ã—Ä–∞",
                    doughType: "yeast",
                    sauceType: "cream",
                    cheeses: ["mozzarella", "cheddar", "parmesan", "gouda"],
                    toppings: [],
                    popular: true
                },
                {
                    id: "hamCheese",
                    name: "–í–µ—Ç—á–∏–Ω–∞ –∏ —Å—ã—Ä",
                    description: "–ü–æ–ø—É–ª—è—Ä–Ω–∞—è –ø–∏—Ü—Ü–∞ —Å –≤–µ—Ç—á–∏–Ω–æ–π –∏ –º–æ—Ü–∞—Ä–µ–ª–ª–æ–π",
                    doughType: "store",
                    sauceType: "tomato",
                    cheeses: ["mozzarella"],
                    toppings: ["ham"],
                    popular: true
                },
                {
                    id: "pepperoni",
                    name: "–ü–µ–ø–ø–µ—Ä–æ–Ω–∏",
                    description: "–û—Å—Ç—Ä–∞—è –ø–∏—Ü—Ü–∞ —Å –ø–µ–ø–ø–µ—Ä–æ–Ω–∏ –∏ —Å—ã—Ä–æ–º",
                    doughType: "store",
                    sauceType: "tomato",
                    cheeses: ["mozzarella", "cheddar"],
                    toppings: ["pepperoni"],
                    popular: true
                },
                {
                    id: "margarita",
                    name: "–ú–∞—Ä–≥–∞—Ä–∏—Ç–∞",
                    description: "–ö–ª–∞—Å—Å–∏–∫–∞ —Å —Ç–æ–º–∞—Ç–∞–º–∏ –∏ –±–∞–∑–∏–ª–∏–∫–æ–º",
                    doughType: "yeast",
                    sauceType: "tomato",
                    cheeses: ["mozzarella"],
                    toppings: ["tomato"],
                    popular: true
                },
                {
                    id: "meatLovers",
                    name: "–ú—è—Å–Ω–æ–µ –∞—Å—Å–æ—Ä—Ç–∏",
                    description: "–î–ª—è –ª—é–±–∏—Ç–µ–ª–µ–π –º—è—Å–∞",
                    doughType: "store",
                    sauceType: "tomato",
                    cheeses: ["mozzarella", "cheddar"],
                    toppings: ["pepperoni", "ham", "bacon", "sausages"],
                    popular: false
                },
                {
                    id: "vegetarian",
                    name: "–í–µ–≥–µ—Ç–∞—Ä–∏–∞–Ω—Å–∫–∞—è",
                    description: "–û–≤–æ—â–Ω–∞—è –ø–∏—Ü—Ü–∞ –±–µ–∑ –º—è—Å–∞",
                    doughType: "yeast",
                    sauceType: "pesto",
                    cheeses: ["mozzarella", "feta"],
                    toppings: ["mushrooms", "bellPepper", "tomato", "olives"],
                    popular: false
                }
            ],
            
            // –¢–∏–ø—ã —Ç–µ—Å—Ç–∞
            doughTypes: {
                yeast: {
                    name: "–î—Ä–æ–∂–∂–µ–≤–æ–µ —Ç–µ—Å—Ç–æ",
                    description: "–ö–ª–∞—Å—Å–∏—á–µ—Å–∫–æ–µ —Ç–µ—Å—Ç–æ –¥–ª—è –ø–∏—Ü—Ü—ã",
                    ingredients: [
                        { id: "flour", name: "–ú—É–∫–∞ –ø—à–µ–Ω–∏—á–Ω–∞—è", baseAmount: 250, unit: "–≥", price: 15 },
                        { id: "water", name: "–í–æ–¥–∞ —Ç–µ–ø–ª–∞—è (40¬∞C)", baseAmount: 160, unit: "–º–ª", price: 0 },
                        { id: "yeast", name: "–î—Ä–æ–∂–∂–∏ —Å—É—Ö–∏–µ", baseAmount: 7, unit: "–≥", price: 10 },
                        { id: "sugar", name: "–°–∞—Ö–∞—Ä", baseAmount: 5, unit: "–≥", price: 2 },
                        { id: "salt", name: "–°–æ–ª—å", baseAmount: 5, unit: "–≥", price: 1 },
                        { id: "oil", name: "–û–ª–∏–≤–∫–æ–≤–æ–µ –º–∞—Å–ª–æ", baseAmount: 15, unit: "–º–ª", price: 10 }
                    ],
                    preparationTime: "1.5-2 —á–∞—Å–∞",
                    difficulty: "–°—Ä–µ–¥–Ω—è—è"
                },
                puff: {
                    name: "–°–ª–æ–µ–Ω–æ–µ —Ç–µ—Å—Ç–æ",
                    description: "–í–æ–∑–¥—É—à–Ω–æ–µ —Ç–µ—Å—Ç–æ —Å —Ö—Ä—É—Å—Ç—è—â–∏–º–∏ —Å–ª–æ—è–º–∏",
                    ingredients: [
                        { id: "puffDough", name: "–°–ª–æ–µ–Ω–æ–µ —Ç–µ—Å—Ç–æ –≥–æ—Ç–æ–≤–æ–µ", baseAmount: 500, unit: "–≥", price: 120 }
                    ],
                    preparationTime: "30 –º–∏–Ω—É—Ç",
                    difficulty: "–õ–µ–≥–∫–∞—è"
                },
                store: {
                    name: "–ì–æ—Ç–æ–≤–æ–µ —Ç–µ—Å—Ç–æ",
                    description: "–ö—É–ø–ª–µ–Ω–Ω–æ–µ —Ç–µ—Å—Ç–æ –¥–ª—è –ø–∏—Ü—Ü—ã",
                    ingredients: [
                        { id: "storeDough", name: "–¢–µ—Å—Ç–æ –¥–ª—è –ø–∏—Ü—Ü—ã –≥–æ—Ç–æ–≤–æ–µ", baseAmount: 500, unit: "–≥", price: 150 }
                    ],
                    preparationTime: "10 –º–∏–Ω—É—Ç",
                    difficulty: "–û—á–µ–Ω—å –ª–µ–≥–∫–∞—è"
                }
            },
            
            // –°–æ—É—Å—ã
            sauces: {
                tomato: {
                    name: "–¢–æ–º–∞—Ç–Ω—ã–π —Å–æ—É—Å",
                    ingredients: [
                        { id: "tomatoPaste", name: "–¢–æ–º–∞—Ç–Ω–∞—è –ø–∞—Å—Ç–∞", baseAmount: 100, unit: "–≥", price: 30 },
                        { id: "tomatoSauce", name: "–¢–æ–º–∞—Ç–Ω—ã–π —Å–æ—É—Å", baseAmount: 100, unit: "–º–ª", price: 40 },
                        { id: "oregano", name: "–û—Ä–µ–≥–∞–Ω–æ —Å—É—à–µ–Ω—ã–π", baseAmount: 5, unit: "–≥", price: 5 },
                        { id: "basil", name: "–ë–∞–∑–∏–ª–∏–∫ —Å—É—à–µ–Ω—ã–π", baseAmount: 5, unit: "–≥", price: 5 },
                        { id: "garlic", name: "–ß–µ—Å–Ω–æ–∫", baseAmount: 2, unit: "–∑—É–±—á–∏–∫–∞", price: 3 },
                        { id: "sugar", name: "–°–∞—Ö–∞—Ä", baseAmount: 5, unit: "–≥", price: 2 },
                        { id: "salt", name: "–°–æ–ª—å –∏ –ø–µ—Ä–µ—Ü", baseAmount: 5, unit: "–≥", price: 1 }
                    ]
                },
                cream: {
                    name: "–°–ª–∏–≤–æ—á–Ω—ã–π —Å–æ—É—Å",
                    ingredients: [
                        { id: "cream", name: "–°–ª–∏–≤–∫–∏ 20%", baseAmount: 200, unit: "–º–ª", price: 50 },
                        { id: "creamCheese", name: "–°—ã—Ä —Å–ª–∏–≤–æ—á–Ω—ã–π", baseAmount: 100, unit: "–≥", price: 80 },
                        { id: "parmesan", name: "–ü–∞—Ä–º–µ–∑–∞–Ω", baseAmount: 30, unit: "–≥", price: 40 },
                        { id: "nutmeg", name: "–ú—É—Å–∫–∞—Ç–Ω—ã–π –æ—Ä–µ—Ö", baseAmount: 1, unit: "—â–µ–ø–æ—Ç–∫–∞", price: 2 },
                        { id: "garlic", name: "–ß–µ—Å–Ω–æ–∫", baseAmount: 1, unit: "–∑—É–±—á–∏–∫", price: 2 },
                        { id: "salt", name: "–°–æ–ª—å –∏ –ø–µ—Ä–µ—Ü", baseAmount: 5, unit: "–≥", price: 1 }
                    ]
                },
                pesto: {
                    name: "–°–æ—É—Å –ü–µ—Å—Ç–æ",
                    ingredients: [
                        { id: "basil", name: "–ë–∞–∑–∏–ª–∏–∫ —Å–≤–µ–∂–∏–π", baseAmount: 50, unit: "–≥", price: 100 },
                        { id: "pineNuts", name: "–ö–µ–¥—Ä–æ–≤—ã–µ –æ—Ä–µ—à–∫–∏", baseAmount: 30, unit: "–≥", price: 60 },
                        { id: "parmesan", name: "–ü–∞—Ä–º–µ–∑–∞–Ω", baseAmount: 50, unit: "–≥", price: 70 },
                        { id: "oliveOil", name: "–û–ª–∏–≤–∫–æ–≤–æ–µ –º–∞—Å–ª–æ", baseAmount: 100, unit: "–º–ª", price: 50 },
                        { id: "garlic", name: "–ß–µ—Å–Ω–æ–∫", baseAmount: 1, unit: "–∑—É–±—á–∏–∫", price: 2 },
                        { id: "salt", name: "–ú–æ—Ä—Å–∫–∞—è —Å–æ–ª—å", baseAmount: 3, unit: "–≥", price: 1 }
                    ]
                }
            },
            
            // –°—ã—Ä—ã
            cheeses: [
                { id: "mozzarella", name: "–ú–æ—Ü–∞—Ä–µ–ª–ª–∞", baseAmount: 200, unit: "–≥", price: 150, popular: true },
                { id: "cheddar", name: "–ß–µ–¥–¥–µ—Ä", baseAmount: 100, unit: "–≥", price: 120, popular: true },
                { id: "parmesan", name: "–ü–∞—Ä–º–µ–∑–∞–Ω", baseAmount: 50, unit: "–≥", price: 100, popular: true },
                { id: "gouda", name: "–ì–∞—É–¥–∞", baseAmount: 100, unit: "–≥", price: 110, popular: false },
                { id: "feta", name: "–§–µ—Ç–∞", baseAmount: 100, unit: "–≥", price: 130, popular: false }
            ],
            
            // –ù–∞—á–∏–Ω–∫–∏
            toppings: [
                { id: "pepperoni", name: "–ü–µ–ø–ø–µ—Ä–æ–Ω–∏", category: "meat", baseAmount: 100, unit: "–≥", price: 180, popular: true },
                { id: "ham", name: "–í–µ—Ç—á–∏–Ω–∞", category: "meat", baseAmount: 100, unit: "–≥", price: 120, popular: true },
                { id: "bacon", name: "–ë–µ–∫–æ–Ω", category: "meat", baseAmount: 80, unit: "–≥", price: 140, popular: true },
                { id: "chicken", name: "–ö—É—Ä–∏—Ü–∞", category: "meat", baseAmount: 150, unit: "–≥", price: 100, popular: true },
                { id: "salami", name: "–°–∞–ª—è–º–∏", category: "meat", baseAmount: 80, unit: "–≥", price: 150, popular: false },
                { id: "sausages", name: "–°–æ—Å–∏—Å–∫–∏", category: "meat", baseAmount: 100, unit: "–≥", price: 80, popular: false },
                { id: "mushrooms", name: "–®–∞–º–ø–∏–Ω—å–æ–Ω—ã", category: "vegetable", baseAmount: 150, unit: "–≥", price: 70, popular: true },
                { id: "bellPepper", name: "–ë–æ–ª–≥–∞—Ä—Å–∫–∏–π –ø–µ—Ä–µ—Ü", category: "vegetable", baseAmount: 1, unit: "—à—Ç", price: 30, popular: true },
                { id: "onion", name: "–õ—É–∫ —Ä–µ–ø—á–∞—Ç—ã–π", category: "vegetable", baseAmount: 1, unit: "—à—Ç", price: 15, popular: true },
                { id: "tomato", name: "–ü–æ–º–∏–¥–æ—Ä—ã", category: "vegetable", baseAmount: 2, unit: "—à—Ç", price: 40, popular: true },
                { id: "olives", name: "–û–ª–∏–≤–∫–∏", category: "vegetable", baseAmount: 50, unit: "–≥", price: 60, popular: true }
            ]
        };

        // –¢–ï–ö–£–©–ï–ï –°–û–°–¢–û–Ø–ù–ò–ï
        let currentState = {
            doughType: "store",
            doughSource: "store",
            pizzaSize: 30,
            sauceType: "tomato",
            selectedCheeses: ["mozzarella"],
            selectedToppings: [],
            selectedPreset: null,
            boughtIngredients: JSON.parse(localStorage.getItem('pizzaBoughtIngredients')) || {}
        };

        // DOM –≠–õ–ï–ú–ï–ù–¢–´
        const pizzaPresetsContainer = document.getElementById('pizza-presets');
        const doughTypeButtons = document.querySelectorAll('#doughType .option-btn');
        const sauceTypeButtons = document.querySelectorAll('#sauceType .option-btn');
        const sizeSlider = document.getElementById('size-slider');
        const sizeValue = document.getElementById('size-value');
        const portionCount = document.getElementById('portion-count');
        const doughTime = document.getElementById('dough-time');
        const pizzaTime = document.getElementById('pizza-time');
        const costTotal = document.getElementById('cost-total');
        const cheeseSelection = document.getElementById('cheese-selection');
        const baseIngredientsList = document.getElementById('base-ingredients');
        const cheeseIngredientsList = document.getElementById('cheese-ingredients');
        const toppingsContainer = document.getElementById('toppings-container');
        const stepsList = document.getElementById('steps-list');
        const boughtCount = document.getElementById('bought-count');
        const totalIngredients = document.getElementById('total-ingredients');
        const progressFill = document.getElementById('progress-fill');
        const progressPercent = document.getElementById('progress-percent');
        const resetListBtn = document.getElementById('reset-list');

        // –ò–ù–ò–¶–ò–ê–õ–ò–ó–ê–¶–ò–Ø
        document.addEventListener('DOMContentLoaded', function() {
            initPizzaPresets();
            initDoughTypeButtons();
            initSauceTypeButtons();
            initSizeSlider();
            updatePizza();
            updateProgress();
        });

        // –ò–ù–ò–¶–ò–ê–õ–ò–ó–ê–¶–ò–Ø –ù–ê–ë–û–†–û–í –ü–ò–¶–¶
        function initPizzaPresets() {
            pizzaData.pizzaPresets.forEach(preset => {
                const presetCard = document.createElement('div');
                presetCard.className = 'preset-card';
                presetCard.dataset.id = preset.id;
                
                presetCard.innerHTML = `
                    <div class="preset-name">${preset.name} ${preset.popular ? '‚≠ê' : ''}</div>
                    <div class="preset-description">${preset.description}</div>
                    <div class="preset-details">
                        <small>–¢–µ—Å—Ç–æ: ${pizzaData.doughTypes[preset.doughType].name}</small><br>
                        <small>–°–æ—É—Å: ${pizzaData.sauces[preset.sauceType].name}</small>
                    </div>
                `;
                
                presetCard.addEventListener('click', function() {
                    // –°–±—Ä–æ—Å –∞–∫—Ç–∏–≤–Ω–æ–≥–æ —Å–æ—Å—Ç–æ—è–Ω–∏—è
                    document.querySelectorAll('.preset-card').forEach(card => {
                        card.classList.remove('active');
                    });
                    this.classList.add('active');
                    
                    // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è
                    currentState.selectedPreset = preset.id;
                    currentState.doughType = preset.doughType;
                    currentState.sauceType = preset.sauceType;
                    currentState.selectedCheeses = [...preset.cheeses];
                    currentState.selectedToppings = [...preset.toppings];
                    
                    // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∫–Ω–æ–ø–æ–∫
                    updateButtonsFromState();
                    updatePizza();
                    updateProgress();
                });
                
                pizzaPresetsContainer.appendChild(presetCard);
            });
        }

        // –ò–ù–ò–¶–ò–ê–õ–ò–ó–ê–¶–ò–Ø –ö–ù–û–ü–û–ö –¢–ò–ü–ê –¢–ï–°–¢–ê
        function initDoughTypeButtons() {
            doughTypeButtons.forEach(btn => {
                btn.addEventListener('click', function() {
                    currentState.selectedPreset = null;
                    document.querySelectorAll('.preset-card').forEach(card => {
                        card.classList.remove('active');
                    });
                    
                    doughTypeButtons.forEach(b => b.classList.remove('active'));
                    this.classList.add('active');
                    
                    currentState.doughType = this.getAttribute('data-type');
                    currentState.doughSource = this.getAttribute('data-dough');
                    
                    updatePizza();
                    updateProgress();
                });
            });
        }

        // –ò–ù–ò–¶–ò–ê–õ–ò–ó–ê–¶–ò–Ø –ö–ù–û–ü–û–ö –¢–ò–ü–ê –°–û–£–°–ê
        function initSauceTypeButtons() {
            sauceTypeButtons.forEach(btn => {
                btn.addEventListener('click', function() {
                    currentState.selectedPreset = null;
                    document.querySelectorAll('.preset-card').forEach(card => {
                        card.classList.remove('active');
                    });
                    
                    sauceTypeButtons.forEach(b => b.classList.remove('active'));
                    this.classList.add('active');
                    
                    currentState.sauceType = this.getAttribute('data-sauce');
                    updatePizza();
                    updateProgress();
                });
            });
        }

        // –ò–ù–ò–¶–ò–ê–õ–ò–ó–ê–¶–ò–Ø –°–õ–ê–ô–î–ï–†–ê –†–ê–ó–ú–ï–†–ê
        function initSizeSlider() {
            sizeSlider.addEventListener('input', function() {
                currentState.pizzaSize = parseInt(this.value);
                sizeValue.textContent = `${currentState.pizzaSize} —Å–º`;
                
                let portions;
                if (currentState.pizzaSize <= 25) portions = "2-3 –ø–æ—Ä—Ü–∏–∏";
                else if (currentState.pizzaSize <= 30) portions = "3-4 –ø–æ—Ä—Ü–∏–∏";
                else portions = "4-5 –ø–æ—Ä—Ü–∏–π";
                portionCount.textContent = portions;
                
                updatePizza();
                updateProgress();
            });
        }

        // –û–ë–ù–û–í–õ–ï–ù–ò–ï –ö–ù–û–ü–û–ö –ò–ó –°–û–°–¢–û–Ø–ù–ò–Ø
        function updateButtonsFromState() {
            // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∫–Ω–æ–ø–æ–∫ —Ç–µ—Å—Ç–∞
            doughTypeButtons.forEach(btn => {
                btn.classList.remove('active');
                if (btn.getAttribute('data-type') === currentState.doughType) {
                    btn.classList.add('active');
                }
            });
            
            // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∫–Ω–æ–ø–æ–∫ —Å–æ—É—Å–∞
            sauceTypeButtons.forEach(btn => {
                btn.classList.remove('active');
                if (btn.getAttribute('data-sauce') === currentState.sauceType) {
                    btn.classList.add('active');
                }
            });
        }

        // –û–ë–ù–û–í–õ–ï–ù–ò–ï –í–°–ï–ô –ü–ò–¶–¶–´
        function updatePizza() {
            updateIngredients();
            updateSteps();
            updateCost();
            updateTimers();
        }

        // –û–ë–ù–û–í–õ–ï–ù–ò–ï –ò–ù–ì–†–ï–î–ò–ï–ù–¢–û–í
        function updateIngredients() {
            baseIngredientsList.innerHTML = '';
            cheeseIngredientsList.innerHTML = '';
            toppingsContainer.innerHTML = '';
            cheeseSelection.innerHTML = '';
            
            const sizeMultiplier = Math.pow(currentState.pizzaSize / 30, 2);
            
            // –û—Å–Ω–æ–≤–Ω—ã–µ –∏–Ω–≥—Ä–µ–¥–∏–µ–Ω—Ç—ã
            const doughIngredients = pizzaData.doughTypes[currentState.doughType].ingredients;
            const sauceIngredients = pizzaData.sauces[currentState.sauceType].ingredients;
            
            renderIngredientList(baseIngredientsList, doughIngredients, sizeMultiplier, 'dough');
            renderIngredientList(baseIngredientsList, sauceIngredients, sizeMultiplier, 'sauce');
            
            // –°—ã—Ä
            const selectedCheeses = pizzaData.cheeses.filter(cheese => 
                currentState.selectedCheeses.includes(cheese.id)
            );
            
            // –°–æ–∑–¥–∞–µ–º —á–µ–∫–±–æ–∫—Å—ã –¥–ª—è —Å—ã—Ä–∞
            const cheeseOptionsDiv = document.createElement('div');
            cheeseOptionsDiv.className = 'cheese-options';
            
            pizzaData.cheeses.forEach(cheese => {
                const isSelected = currentState.selectedCheeses.includes(cheese.id);
                const cheeseOption = document.createElement('div');
                cheeseOption.className = `cheese-option ${isSelected ? 'selected' : ''}`;
                
                cheeseOption.innerHTML = `
                    <input type="checkbox" id="cheese-${cheese.id}" ${isSelected ? 'checked' : ''}>
                    <label for="cheese-${cheese.id}">${cheese.name} ${cheese.popular ? '‚≠ê' : ''}</label>
                `;
                
                const checkbox = cheeseOption.querySelector('input');
                checkbox.addEventListener('change', function() {
                    if (this.checked) {
                        currentState.selectedCheeses.push(cheese.id);
                    } else {
                        const index = currentState.selectedCheeses.indexOf(cheese.id);
                        if (index > -1) {
                            currentState.selectedCheeses.splice(index, 1);
                        }
                    }
                    cheeseOption.classList.toggle('selected', this.checked);
                    updatePizza();
                });
                
                cheeseOptionsDiv.appendChild(cheeseOption);
            });
            
            cheeseSelection.appendChild(cheeseOptionsDiv);
            
            // –ò–Ω–≥—Ä–µ–¥–∏–µ–Ω—Ç—ã —Å—ã—Ä–∞
            renderIngredientList(cheeseIngredientsList, selectedCheeses, sizeMultiplier, 'cheese');
            
            // –ù–∞—á–∏–Ω–∫–∏
            if (currentState.selectedToppings.length > 0) {
                const selectedToppings = pizzaData.toppings.filter(topping => 
                    currentState.selectedToppings.includes(topping.id)
                );
                
                const toppingsGrid = document.createElement('div');
                toppingsGrid.style.display = 'grid';
                toppingsGrid.style.gridTemplateColumns = 'repeat(auto-fill, minmax(150px, 1fr))';
                toppingsGrid.style.gap = '10px';
                toppingsGrid.style.marginTop = '15px';
                
                selectedToppings.forEach(topping => {
                    const toppingCard = document.createElement('div');
                    toppingCard.style.padding = '10px';
                    toppingCard.style.background = '#f9f9f9';
                    toppingCard.style.borderRadius = '8px';
                    toppingCard.style.border = '2px solid #eee';
                    
                    const calculatedAmount = topping.baseAmount * sizeMultiplier;
                    const displayAmount = formatAmount(calculatedAmount, topping.unit);
                    
                    toppingCard.innerHTML = `
                        <div style="font-weight: bold;">${getToppingEmoji(topping.id)} ${topping.name}</div>
                        <div style="font-size: 0.9rem; color: #666;">${displayAmount}</div>
                        <div style="font-size: 0.85rem; color: var(--pizza-red);">~${Math.round((topping.price / topping.baseAmount) * calculatedAmount)} —Ä—É–±</div>
                    `;
                    
                    toppingsGrid.appendChild(toppingCard);
                });
                
                toppingsContainer.appendChild(toppingsGrid);
            }
            
            // –û–±–Ω–æ–≤–ª—è–µ–º –æ–±—â–µ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∏–Ω–≥—Ä–µ–¥–∏–µ–Ω—Ç–æ–≤
            const total = doughIngredients.length + sauceIngredients.length + 
                         selectedCheeses.length + currentState.selectedToppings.length;
            totalIngredients.textContent = total;
        }

        // –†–ï–ù–î–ï–†–ò–ù–ì –°–ü–ò–°–ö–ê –ò–ù–ì–†–ï–î–ò–ï–ù–¢–û–í
        function renderIngredientList(container, ingredientList, multiplier, category) {
            ingredientList.forEach(ingredient => {
                const calculatedAmount = ingredient.baseAmount * multiplier;
                const displayAmount = formatAmount(calculatedAmount, ingredient.unit);
                const price = (ingredient.price / ingredient.baseAmount) * calculatedAmount;
                const ingredientId = `${category}-${ingredient.id}`;
                const isChecked = currentState.boughtIngredients[ingredientId] || false;
                
                const li = document.createElement('li');
                li.className = isChecked ? 'completed' : '';
                li.dataset.id = ingredientId;
                
                li.innerHTML = `
                    <input type="checkbox" class="ingredient-checkbox" id="${ingredientId}" ${isChecked ? 'checked' : ''}>
                    <span class="ingredient-amount">${displayAmount}</span>
                    <span class="ingredient-name">${ingredient.name}</span>
                    <span class="ingredient-price">~${Math.round(price)} —Ä—É–±</span>
                `;
                
                const checkbox = li.querySelector('.ingredient-checkbox');
                checkbox.addEventListener('change', function() {
                    currentState.boughtIngredients[ingredientId] = this.checked;
                    localStorage.setItem('pizzaBoughtIngredients', JSON.stringify(currentState.boughtIngredients));
                    li.classList.toggle('completed', this.checked);
                    updateProgress();
                });
                
                container.appendChild(li);
            });
        }

        // –§–û–†–ú–ê–¢–ò–†–û–í–ê–ù–ò–ï –ö–û–õ–ò–ß–ï–°–¢–í–ê
        function formatAmount(amount, unit) {
            if (unit === '—à—Ç' || unit === '–∑—É–±—á–∏–∫' || unit === '—â–µ–ø–æ—Ç–∫–∞') {
                return amount % 1 === 0 ? `${amount} ${unit}` : `${amount.toFixed(1)} ${unit}`;
            } else if (unit === '–≥' || unit === '–º–ª') {
                return `${Math.round(amount)} ${unit}`;
            } else {
                return `${Math.round(amount)} ${unit}`;
            }
        }

        // –≠–ú–û–î–ó–ò –î–õ–Ø –ù–ê–ß–ò–ù–û–ö
        function getToppingEmoji(toppingId) {
            const emojiMap = {
                pepperoni: 'üçñ',
                ham: 'üçó',
                bacon: 'ü•ì',
                chicken: 'üêî',
                salami: 'ü•©',
                sausages: 'üå≠',
                mushrooms: 'üçÑ',
                bellPepper: 'ü´ë',
                onion: 'üßÖ',
                tomato: 'üçÖ',
                olives: 'ü´í'
            };
            return emojiMap[toppingId] || '‚ú®';
        }

        // –û–ë–ù–û–í–õ–ï–ù–ò–ï –®–ê–ì–û–í –ü–†–ò–ì–û–¢–û–í–õ–ï–ù–ò–Ø
        function updateSteps() {
            stepsList.innerHTML = '';
            const sizeMultiplier = Math.pow(currentState.pizzaSize / 30, 2);
            
            const doughTimeMinutes = currentState.pizzaSize <= 25 ? 5 : currentState.pizzaSize <= 30 ? 6 : 7;
            const pizzaTimeMinutes = currentState.pizzaSize <= 25 ? 8 : currentState.pizzaSize <= 30 ? 10 : 12;
            
            // –®–∞–≥ 1: –ü—Ä–∏–≥–æ—Ç–æ–≤–ª–µ–Ω–∏–µ —Ç–µ—Å—Ç–∞
            if (currentState.doughSource === 'fresh' && currentState.doughType === 'yeast') {
                addStep(1, `
                    <strong>–ü—Ä–∏–≥–æ—Ç–æ–≤–ª–µ–Ω–∏–µ –¥—Ä–æ–∂–∂–µ–≤–æ–≥–æ —Ç–µ—Å—Ç–∞:</strong>
                    <div class="step-detail">
                        <strong>–ò–Ω–≥—Ä–µ–¥–∏–µ–Ω—Ç—ã –¥–ª—è —Ç–µ—Å—Ç–∞:</strong>
                        <div class="measurement-detail">
                            ${pizzaData.doughTypes.yeast.ingredients.map(ing => {
                                const amount = ing.baseAmount * sizeMultiplier;
                                return `${formatAmount(amount, ing.unit)} ${ing.name}`;
                            }).join(' | ')}
                        </div>
                        <strong>–ü–æ—à–∞–≥–æ–≤–æ:</strong><br>
                        1. –í —Ç–µ–ø–ª–æ–π –≤–æ–¥–µ (40¬∞C) —Ä–∞—Å—Ç–≤–æ—Ä–∏—Ç–µ —Å–∞—Ö–∞—Ä –∏ –¥—Ä–æ–∂–∂–∏, –æ—Å—Ç–∞–≤—å—Ç–µ –Ω–∞ 10 –º–∏–Ω—É—Ç –¥–æ –ø–æ—è–≤–ª–µ–Ω–∏—è –ø–µ–Ω—ã<br>
                        2. –í –≥–ª—É–±–æ–∫–æ–π –º–∏—Å–∫–µ —Å–º–µ—à–∞–π—Ç–µ –º—É–∫—É –∏ —Å–æ–ª—å, —Å–¥–µ–ª–∞–π—Ç–µ —É–≥–ª—É–±–ª–µ–Ω–∏–µ –≤ —Ü–µ–Ω—Ç—Ä–µ<br>
                        3. –í–ª–µ–π—Ç–µ –¥—Ä–æ–∂–∂–µ–≤—É—é —Å–º–µ—Å—å –∏ –æ–ª–∏–≤–∫–æ–≤–æ–µ –º–∞—Å–ª–æ –≤ —É–≥–ª—É–±–ª–µ–Ω–∏–µ<br>
                        4. –ù–∞—á–∏–Ω–∞–π—Ç–µ –∑–∞–º–µ—à–∏–≤–∞—Ç—å —Ç–µ—Å—Ç–æ –ª–æ–∂–∫–æ–π, –∑–∞—Ç–µ–º —Ä—É–∫–∞–º–∏<br>
                        5. –í—ã–º–µ—à–∏–≤–∞–π—Ç–µ 10-15 –º–∏–Ω—É—Ç –¥–æ —ç–ª–∞—Å—Ç–∏—á–Ω–æ—Å—Ç–∏<br>
                        6. –ù–∞–∫—Ä–æ–π—Ç–µ –º–∏—Å–∫—É –ø–æ–ª–æ—Ç–µ–Ω—Ü–µ–º –∏ –æ—Å—Ç–∞–≤—å—Ç–µ –≤ —Ç–µ–ø–ª–æ–º –º–µ—Å—Ç–µ –Ω–∞ 1-1.5 —á–∞—Å–∞ –¥–æ —É–¥–≤–æ–µ–Ω–∏—è –æ–±—ä–µ–º–∞<br>
                        7. –û–±–æ–º–Ω–∏—Ç–µ —Ç–µ—Å—Ç–æ, —Ä–∞—Å–∫–∞—Ç–∞–π—Ç–µ –≤ –∫—Ä—É–≥ –¥–∏–∞–º–µ—Ç—Ä–æ–º ${currentState.pizzaSize} —Å–º
                    </div>
                `, false);
            } else if (currentState.doughSource === 'fresh' && currentState.doughType === 'puff') {
                addStep(1, `
                    <strong>–ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ —Å–ª–æ–µ–Ω–æ–≥–æ —Ç–µ—Å—Ç–∞:</strong>
                    <div class="step-detail">
                        <strong>–ò–Ω–≥—Ä–µ–¥–∏–µ–Ω—Ç—ã:</strong>
                        <div class="measurement-detail">
                            ${pizzaData.doughTypes.puff.ingredients.map(ing => {
                                const amount = ing.baseAmount * sizeMultiplier;
                                return `${formatAmount(amount, ing.unit)} ${ing.name}`;
                            }).join(' | ')}
                        </div>
                        <strong>–ü–æ—à–∞–≥–æ–≤–æ:</strong><br>
                        1. –î–æ—Å—Ç–∞–Ω—å—Ç–µ —Ç–µ—Å—Ç–æ –∏–∑ –º–æ—Ä–æ–∑–∏–ª–∫–∏ –∑–∞ 2-3 —á–∞—Å–∞ –¥–æ –ø—Ä–∏–≥–æ—Ç–æ–≤–ª–µ–Ω–∏—è<br>
                        2. –†–∞—Å–∫–∞—Ç–∞–π—Ç–µ —Ç–µ—Å—Ç–æ –Ω–∞ –ø—Ä–∏—Å—ã–ø–∞–Ω–Ω–æ–π –º—É–∫–æ–π –ø–æ–≤–µ—Ä—Ö–Ω–æ—Å—Ç–∏<br>
                        3. –°—Ñ–æ—Ä–º–∏—Ä—É–π—Ç–µ –∫—Ä—É–≥ –¥–∏–∞–º–µ—Ç—Ä–æ–º ${currentState.pizzaSize} —Å–º<br>
                        4. –ï—Å–ª–∏ —Ç–µ—Å—Ç–æ —Å–ª–∏—à–∫–æ–º —Ö–æ–ª–æ–¥–Ω–æ–µ, –¥–∞–π—Ç–µ –ø–æ–ª–µ–∂–∞—Ç—å 10 –º–∏–Ω—É—Ç –ø—Ä–∏ –∫–æ–º–Ω–∞—Ç–Ω–æ–π —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä–µ
                    </div>
                `, false);
            } else {
                addStep(1, `
                    <strong>–ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ —Ç–µ—Å—Ç–∞:</strong>
                    <div class="step-detail">
                        <strong>–ò–Ω–≥—Ä–µ–¥–∏–µ–Ω—Ç—ã:</strong>
                        <div class="measurement-detail">
                            ${pizzaData.doughTypes.store.ingredients.map(ing => {
                                const amount = ing.baseAmount * sizeMultiplier;
                                return `${formatAmount(amount, ing.unit)} ${ing.name}`;
                            }).join(' | ')}
                        </div>
                        <strong>–ü–æ—à–∞–≥–æ–≤–æ:</strong><br>
                        1. –†–∞—Å–∫–∞—Ç–∞–π—Ç–µ –≥–æ—Ç–æ–≤–æ–µ —Ç–µ—Å—Ç–æ –¥–æ –¥–∏–∞–º–µ—Ç—Ä–∞ ${currentState.pizzaSize} —Å–º<br>
                        2. –ï—Å–ª–∏ —Ç–µ—Å—Ç–æ –ª–∏–ø–∫–æ–µ, —Å–ª–µ–≥–∫–∞ –ø—Ä–∏—Å—ã–ø—å—Ç–µ –º—É–∫–æ–π –ø–æ–≤–µ—Ä—Ö–Ω–æ—Å—Ç—å –∏ —Å–∫–∞–ª–∫—É
                    </div>
                `, false);
            }
            
            // –®–∞–≥ 2: –ü–µ—Ä–≤–∞—è –≤—ã–ø–µ—á–∫–∞
            addStep(2, `
                <strong>–ü–µ—Ä–≤–∞—è –≤—ã–ø–µ—á–∫–∞ –æ—Å–Ω–æ–≤—ã –≤ –∞—ç—Ä–æ–≥—Ä–∏–ª–µ:</strong>
                <div class="step-detail">
                    <strong>–¢–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞:</strong> 180¬∞C<br>
                    <strong>–í—Ä–µ–º—è:</strong> ${doughTimeMinutes} –º–∏–Ω—É—Ç
                    <div class="cutting-instruction">
                        1. –ü–æ–ª–æ–∂–∏—Ç–µ —Ç–µ—Å—Ç–æ –Ω–∞ –ø–µ—Ä–≥–∞–º–µ–Ω—Ç–Ω—É—é –±—É–º–∞–≥—É<br>
                        2. –ü–æ—Å—Ç–∞–≤—å—Ç–µ –≤ –∞—ç—Ä–æ–≥—Ä–∏–ª—å –Ω–∞ —Å—Ä–µ–¥–Ω—é—é —Ä–µ—à–µ—Ç–∫—É<br>
                        3. –í—ã–ø–µ–∫–∞–π—Ç–µ –¥–æ –ª–µ–≥–∫–æ–π –∑–æ–ª–æ—Ç–∏—Å—Ç–æ—Å—Ç–∏<br>
                        4. –ï—Å–ª–∏ —Ç–µ—Å—Ç–æ –ø–æ–¥–Ω–∏–º–∞–µ—Ç—Å—è –ø—É–∑—ã—Ä—è–º–∏, –ø—Ä–æ—Ç–∫–Ω–∏—Ç–µ –≤–∏–ª–∫–æ–π
                    </div>
                </div>
            `, true, doughTimeMinutes, "–í—ã–ø–µ—á–∫–∞ –æ—Å–Ω–æ–≤—ã");
            
            // –®–∞–≥ 3: –ü—Ä–∏–≥–æ—Ç–æ–≤–ª–µ–Ω–∏–µ —Å–æ—É—Å–∞
            const sauce = pizzaData.sauces[currentState.sauceType];
            addStep(3, `
                <strong>–ü—Ä–∏–≥–æ—Ç–æ–≤–ª–µ–Ω–∏–µ ${sauce.name.toLowerCase()}:</strong>
                <div class="step-detail">
                    <strong>–ò–Ω–≥—Ä–µ–¥–∏–µ–Ω—Ç—ã –¥–ª—è —Å–æ—É—Å–∞:</strong>
                    <div class="measurement-detail">
                        ${sauce.ingredients.map(ing => {
                            const amount = ing.baseAmount * sizeMultiplier;
                            return `${formatAmount(amount, ing.unit)} ${ing.name}`;
                        }).join(' | ')}
                    </div>
                    <strong>–ü—Ä–∏–≥–æ—Ç–æ–≤–ª–µ–Ω–∏–µ:</strong><br>
                    ${currentState.sauceType === 'tomato' ? 
                        '1. –í –º–∏—Å–∫–µ —Å–º–µ—à–∞–π—Ç–µ —Ç–æ–º–∞—Ç–Ω—É—é –ø–∞—Å—Ç—É –∏ —Ç–æ–º–∞—Ç–Ω—ã–π —Å–æ—É—Å<br>2. –î–æ–±–∞–≤—å—Ç–µ –∏–∑–º–µ–ª—å—á–µ–Ω–Ω—ã–π —á–µ—Å–Ω–æ–∫, –æ—Ä–µ–≥–∞–Ω–æ, –±–∞–∑–∏–ª–∏–∫<br>3. –ü—Ä–∏–ø—Ä–∞–≤—å—Ç–µ —Å–æ–ª—å—é, –ø–µ—Ä—Ü–µ–º –∏ —Å–∞—Ö–∞—Ä–æ–º –ø–æ –≤–∫—É—Å—É<br>4. –¢—â–∞—Ç–µ–ª—å–Ω–æ –ø–µ—Ä–µ–º–µ—à–∞–π—Ç–µ –¥–æ –æ–¥–Ω–æ—Ä–æ–¥–Ω–æ—Å—Ç–∏' : 
                     currentState.sauceType === 'cream' ? 
                        '1. –í —Å–æ—Ç–µ–π–Ω–∏–∫–µ –ø–æ–¥–æ–≥—Ä–µ–π—Ç–µ —Å–ª–∏–≤–∫–∏ (–Ω–µ –¥–æ–≤–æ–¥–∏—Ç–µ –¥–æ –∫–∏–ø–µ–Ω–∏—è)<br>2. –î–æ–±–∞–≤—å—Ç–µ –Ω–∞—Ç–µ—Ä—Ç—ã–π —Å–ª–∏–≤–æ—á–Ω—ã–π —Å—ã—Ä –∏ –ø–∞—Ä–º–µ–∑–∞–Ω<br>3. –î–æ–±–∞–≤—å—Ç–µ —Ç–µ—Ä—Ç—ã–π –º—É—Å–∫–∞—Ç–Ω—ã–π –æ—Ä–µ—Ö –∏ –∏–∑–º–µ–ª—å—á–µ–Ω–Ω—ã–π —á–µ—Å–Ω–æ–∫<br>4. –ü–æ–º–µ—à–∏–≤–∞–π—Ç–µ –¥–æ –æ–¥–Ω–æ—Ä–æ–¥–Ω–æ–π –∫–æ–Ω—Å–∏—Å—Ç–µ–Ω—Ü–∏–∏' :
                     '1. –í –±–ª–µ–Ω–¥–µ—Ä–µ —Å–º–µ—à–∞–π—Ç–µ —Å–≤–µ–∂–∏–π –±–∞–∑–∏–ª–∏–∫, –∫–µ–¥—Ä–æ–≤—ã–µ –æ—Ä–µ—Ö–∏ –∏ —á–µ—Å–Ω–æ–∫<br>2. –î–æ–±–∞–≤—å—Ç–µ –ø–∞—Ä–º–µ–∑–∞–Ω –∏ –æ–ª–∏–≤–∫–æ–≤–æ–µ –º–∞—Å–ª–æ<br>3. –í–∑–±–∏–≤–∞–π—Ç–µ –¥–æ –ø–æ–ª—É—á–µ–Ω–∏—è –æ–¥–Ω–æ—Ä–æ–¥–Ω–æ–π –ø–∞—Å—Ç—ã<br>4. –ü—Ä–∏–ø—Ä–∞–≤—å—Ç–µ –º–æ—Ä—Å–∫–æ–π —Å–æ–ª—å—é –ø–æ –≤–∫—É—Å—É'}
                </div>
            `, false);
            
            // –®–∞–≥ 4: –ù–∞–º–∞–∑—ã–≤–∞–Ω–∏–µ —Å–æ—É—Å–∞
            const sauceAmount = Math.round(150 * sizeMultiplier);
            addStep(4, `
                <strong>–ù–∞–º–∞–∑—ã–≤–∞–Ω–∏–µ —Å–æ—É—Å–∞ –Ω–∞ –æ—Å–Ω–æ–≤—É:</strong>
                <div class="step-detail">
                    <strong>–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å–æ—É—Å–∞:</strong> ~${sauceAmount}–≥<br>
                    <strong>–¢–µ—Ö–Ω–∏–∫–∞:</strong><br>
                    1. –†–∞–≤–Ω–æ–º–µ—Ä–Ω–æ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–∏—Ç–µ —Å–æ—É—Å –ø–æ –≤—Å–µ–π –ø–æ–≤–µ—Ä—Ö–Ω–æ—Å—Ç–∏ –æ—Å–Ω–æ–≤—ã<br>
                    2. –û—Ç—Å—Ç—É–ø–∏—Ç–µ 1-1.5 —Å–º –æ—Ç –∫—Ä–∞—è –¥–ª—è —Ñ–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏—è –∫–æ—Ä–æ—á–∫–∏<br>
                    3. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –ª–æ–∂–∫—É –∏–ª–∏ –ª–æ–ø–∞—Ç–∫—É –¥–ª—è —Ä–∞–≤–Ω–æ–º–µ—Ä–Ω–æ–≥–æ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è
                </div>
            `, false);
            
            // –®–∞–≥ 5: –î–æ–±–∞–≤–ª–µ–Ω–∏–µ —Å—ã—Ä–∞
            const selectedCheeses = pizzaData.cheeses.filter(cheese => 
                currentState.selectedCheeses.includes(cheese.id)
            );
            const cheeseAmount = selectedCheeses.reduce((sum, cheese) => 
                sum + Math.round(cheese.baseAmount * sizeMultiplier), 0);
            
            addStep(5, `
                <strong>–î–æ–±–∞–≤–ª–µ–Ω–∏–µ —Å—ã—Ä–∞:</strong>
                <div class="step-detail">
                    <strong>–í–∏–¥—ã —Å—ã—Ä–∞:</strong> ${selectedCheeses.map(c => c.name).join(', ')}<br>
                    <strong>–û–±—â–µ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ:</strong> ~${cheeseAmount}–≥
                    <div class="cutting-instruction">
                        <strong>–ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ —Å—ã—Ä–∞:</strong><br>
                        ${selectedCheeses.map(cheese => {
                            if (cheese.id === 'mozzarella') return '‚Ä¢ –ú–æ—Ü–∞—Ä–µ–ª–ª–∞: –Ω–∞—Ç–µ—Ä–µ—Ç—å –Ω–∞ –∫—Ä—É–ø–Ω–æ–π —Ç–µ—Ä–∫–µ –∏–ª–∏ —Ä–∞–∑–æ—Ä–≤–∞—Ç—å –Ω–∞ –≤–æ–ª–æ–∫–Ω–∞';
                            if (cheese.id === 'parmesan') return '‚Ä¢ –ü–∞—Ä–º–µ–∑–∞–Ω: –Ω–∞—Ç–µ—Ä–µ—Ç—å –Ω–∞ –º–µ–ª–∫–æ–π —Ç–µ—Ä–∫–µ';
                            return `‚Ä¢ ${cheese.name}: –Ω–∞—Ç–µ—Ä–µ—Ç—å –Ω–∞ –∫—Ä—É–ø–Ω–æ–π —Ç–µ—Ä–∫–µ`;
                        }).join('<br>')}
                    </div>
                    <strong>–†–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ:</strong><br>
                    1. –†–∞–≤–Ω–æ–º–µ—Ä–Ω–æ –ø–æ—Å—ã–ø—å—Ç–µ —Å—ã—Ä –ø–æ –≤—Å–µ–π –ø–æ–≤–µ—Ä—Ö–Ω–æ—Å—Ç–∏ –ø–∏—Ü—Ü—ã<br>
                    2. –°–ª–µ–≥–∫–∞ –ø—Ä–∏–∂–º–∏—Ç–µ —Å—ã—Ä –∫ —Å–æ—É—Å—É –¥–ª—è –ª—É—á—à–µ–≥–æ —Å—Ü–µ–ø–ª–µ–Ω–∏—è
                </div>
            `, false);
            
            // –®–∞–≥ 6: –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–∞—á–∏–Ω–∫–∏
            if (currentState.selectedToppings.length > 0) {
                const selectedToppings = pizzaData.toppings.filter(topping => 
                    currentState.selectedToppings.includes(topping.id)
                );
                
                addStep(6, `
                    <strong>–î–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–∞—á–∏–Ω–∫–∏:</strong>
                    <div class="step-detail">
                        <strong>–ù–∞—á–∏–Ω–∫–∞:</strong> ${selectedToppings.map(t => t.name).join(', ')}
                        <div class="cutting-instruction">
                            <strong>–ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –Ω–∞—á–∏–Ω–∫–∏:</strong><br>
                            ${selectedToppings.map(topping => {
                                let cutting = '';
                                switch(topping.id) {
                                    case 'pepperoni': cutting = '‚Ä¢ –ü–µ–ø–ø–µ—Ä–æ–Ω–∏: –Ω–∞—Ä–µ–∑–∞—Ç—å —Ç–æ–Ω–∫–∏–º–∏ –∫—Ä—É–∂–æ—á–∫–∞–º–∏ (2-3 –º–º)'; break;
                                    case 'ham': cutting = '‚Ä¢ –í–µ—Ç—á–∏–Ω–∞: –Ω–∞—Ä–µ–∑–∞—Ç—å —Ç–æ–Ω–∫–æ–π —Å–æ–ª–æ–º–∫–æ–π –∏–ª–∏ –∫—É–±–∏–∫–∞–º–∏ 1√ó1 —Å–º'; break;
                                    case 'bacon': cutting = '‚Ä¢ –ë–µ–∫–æ–Ω: –Ω–∞—Ä–µ–∑–∞—Ç—å –Ω–µ–±–æ–ª—å—à–∏–º–∏ –∫—É—Å–æ—á–∫–∞–º–∏ 2√ó2 —Å–º'; break;
                                    case 'chicken': cutting = '‚Ä¢ –ö—É—Ä–∏—Ü–∞: –Ω–∞—Ä–µ–∑–∞—Ç—å –∫—É–±–∏–∫–∞–º–∏ 1.5√ó1.5 —Å–º, –ø—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω–æ –æ–±–∂–∞—Ä–∏—Ç—å'; break;
                                    case 'mushrooms': cutting = '‚Ä¢ –ì—Ä–∏–±—ã: –Ω–∞—Ä–µ–∑–∞—Ç—å –ø–ª–∞—Å—Ç–∏–Ω–∫–∞–º–∏ —Ç–æ–ª—â–∏–Ω–æ–π 3-4 –º–º'; break;
                                    case 'bellPepper': cutting = '‚Ä¢ –ü–µ—Ä–µ—Ü: –Ω–∞—Ä–µ–∑–∞—Ç—å —Ç–æ–Ω–∫–æ–π —Å–æ–ª–æ–º–∫–æ–π, —É–¥–∞–ª–∏—Ç—å —Å–µ–º–µ–Ω–∞'; break;
                                    case 'onion': cutting = '‚Ä¢ –õ—É–∫: –Ω–∞—Ä–µ–∑–∞—Ç—å —Ç–æ–Ω–∫–∏–º–∏ –ø–æ–ª—É–∫–æ–ª—å—Ü–∞–º–∏'; break;
                                    case 'tomato': cutting = '‚Ä¢ –ü–æ–º–∏–¥–æ—Ä—ã: –Ω–∞—Ä–µ–∑–∞—Ç—å –∫—Ä—É–∂–æ—á–∫–∞–º–∏ 5 –º–º, —É–¥–∞–ª–∏—Ç—å —Å–µ–º–µ–Ω–∞'; break;
                                    case 'olives': cutting = '‚Ä¢ –û–ª–∏–≤–∫–∏: –Ω–∞—Ä–µ–∑–∞—Ç—å –∫–æ–ª–µ—á–∫–∞–º–∏ –∏–ª–∏ –æ—Å—Ç–∞–≤–∏—Ç—å —Ü–µ–ª–∏–∫–æ–º'; break;
                                    default: cutting = `‚Ä¢ ${topping.name}: –Ω–∞—Ä–µ–∑–∞—Ç—å –ø–æ –≤–∫—É—Å—É`;
                                }
                                return cutting;
                            }).join('<br>')}
                        </div>
                        <strong>–†–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ:</strong><br>
                        1. –†–∞–≤–Ω–æ–º–µ—Ä–Ω–æ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–∏—Ç–µ –Ω–∞—á–∏–Ω–∫—É –ø–æ –ø–æ–≤–µ—Ä—Ö–Ω–æ—Å—Ç–∏<br>
                        2. –ù–µ –ø–µ—Ä–µ–≥—Ä—É–∂–∞–π—Ç–µ –ø–∏—Ü—Ü—É - –ª—É—á—à–µ –º–µ–Ω—å—à–µ, –Ω–æ —Ä–∞–≤–Ω–æ–º–µ—Ä–Ω–æ<br>
                        3. –°–ª–µ–≥–∫–∞ –≤–¥–∞–≤–∏—Ç–µ –Ω–∞—á–∏–Ω–∫—É –≤ —Å—ã—Ä
                    </div>
                `, false);
            }
            
            // –®–∞–≥ 7: –í—Ç–æ—Ä–∞—è –≤—ã–ø–µ—á–∫–∞
            addStep(7, `
                <strong>–í—Ç–æ—Ä–∞—è –≤—ã–ø–µ—á–∫–∞ –≤ –∞—ç—Ä–æ–≥—Ä–∏–ª–µ:</strong>
                <div class="step-detail">
                    <strong>–¢–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞:</strong> 200¬∞C<br>
                    <strong>–í—Ä–µ–º—è:</strong> ${pizzaTimeMinutes} –º–∏–Ω—É—Ç
                    <div class="cutting-instruction">
                        1. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –ø–∏—Ü—Ü—É –Ω–∞ —Å—Ä–µ–¥–Ω—é—é —Ä–µ—à–µ—Ç–∫—É –∞—ç—Ä–æ–≥—Ä–∏–ª—è<br>
                        2. –ß–µ—Ä–µ–∑ 5 –º–∏–Ω—É—Ç –ø–æ–≤–µ—Ä–Ω–∏—Ç–µ –ø–∏—Ü—Ü—É –¥–ª—è —Ä–∞–≤–Ω–æ–º–µ—Ä–Ω–æ–≥–æ –∑–∞–ø–µ–∫–∞–Ω–∏—è<br>
                        3. –ì–æ—Ç–æ–≤–Ω–æ—Å—Ç—å –æ–ø—Ä–µ–¥–µ–ª—è–π—Ç–µ –ø–æ —Ä–∞—Å–ø–ª–∞–≤–ª–µ–Ω–Ω–æ–º—É —Å—ã—Ä—É –∏ –∑–æ–ª–æ—Ç–∏—Å—Ç–æ–π –∫–æ—Ä–æ—á–∫–µ<br>
                        4. –ï—Å–ª–∏ –∫—Ä–∞—è –ø–æ–¥–≥–æ—Ä–∞—é—Ç, –Ω–∞–∫—Ä–æ–π—Ç–µ –∏—Ö —Ñ–æ–ª—å–≥–æ–π
                    </div>
                </div>
            `, true, pizzaTimeMinutes, "–í—ã–ø–µ—á–∫–∞ –ø–∏—Ü—Ü—ã");
            
            // –®–∞–≥ 8: –ü–æ–¥–∞—á–∞
            addStep(8, `
                <strong>–ü–æ–¥–∞—á–∞ –ø–∏—Ü—Ü—ã:</strong>
                <div class="step-detail">
                    <strong>–ü–µ—Ä–µ–¥ –ø–æ–¥–∞—á–µ–π:</strong><br>
                    1. –î–∞–π—Ç–µ –ø–∏—Ü—Ü–µ –æ—Å—Ç—ã—Ç—å 2-3 –º–∏–Ω—É—Ç—ã<br>
                    2. –ù–∞—Ä–µ–∂—å—Ç–µ –Ω–∞ ${currentState.pizzaSize <= 25 ? '6' : currentState.pizzaSize <= 30 ? '8' : '10'} –∫—É—Å–æ—á–∫–æ–≤<br>
                    3. –ü–æ–¥–∞–≤–∞–π—Ç–µ —Å –æ–ª–∏–≤–∫–æ–≤—ã–º –º–∞—Å–ª–æ–º –∏ —Å–≤–µ–∂–µ–π –∑–µ–ª–µ–Ω—å—é
                    <div class="cutting-instruction">
                        <strong>–°–æ–≤–µ—Ç—ã –ø–æ –ø–æ–¥–∞—á–µ:</strong><br>
                        ‚Ä¢ –î–ª—è –∫–ª–∞—Å—Å–∏—á–µ—Å–∫–æ–π –ø–∏—Ü—Ü—ã "–ú–∞—Ä–≥–∞—Ä–∏—Ç–∞" –¥–æ–±–∞–≤—å—Ç–µ —Å–≤–µ–∂–∏–π –±–∞–∑–∏–ª–∏–∫ –ø–æ—Å–ª–µ –≤—ã–ø–µ—á–∫–∏<br>
                        ‚Ä¢ –î–ª—è –ø–∏—Ü—Ü—ã "4 —Å—ã—Ä–∞" —Å–±—Ä—ã–∑–Ω–∏—Ç–µ –æ–ª–∏–≤–∫–æ–≤—ã–º –º–∞—Å–ª–æ–º<br>
                        ‚Ä¢ –î–ª—è –æ—Å—Ç—Ä–æ–π –ø–∏—Ü—Ü—ã –¥–æ–±–∞–≤—å—Ç–µ —Ö–ª–æ–ø—å—è —á–∏–ª–∏
                    </div>
                </div>
            `, false);
        }

        // –î–û–ë–ê–í–õ–ï–ù–ò–ï –®–ê–ì–ê
        function addStep(number, text, hasTimer, timerMinutes, timerName) {
            const li = document.createElement('li');
            li.innerHTML = `
                <div class="step-number">${number}</div>
                <div class="step-content">
                    ${text}
                    ${hasTimer ? `<span class="step-timer" data-time="${timerMinutes}" style="display: inline-flex; align-items: center; margin-top: 10px; color: var(--herb-green); font-weight: bold; cursor: pointer; background: rgba(34, 139, 34, 0.1); padding: 5px 10px; border-radius: 20px;"><i class="fas fa-hourglass-half"></i> –¢–∞–π–º–µ—Ä: ${timerMinutes} –º–∏–Ω</span>` : ''}
                </div>
            `;
            
            if (hasTimer) {
                const timerBtn = li.querySelector('.step-timer');
                timerBtn.addEventListener('click', function() {
                    const minutes = parseInt(this.getAttribute('data-time'));
                    openTimerModal(timerName || `–®–∞–≥ ${number}`, minutes);
                });
            }
            
            stepsList.appendChild(li);
        }

        // –û–ë–ù–û–í–õ–ï–ù–ò–ï –°–¢–û–ò–ú–û–°–¢–ò
        function updateCost() {
            const sizeMultiplier = Math.pow(currentState.pizzaSize / 30, 2);
            let totalCost = 0;
            
            // –¢–µ—Å—Ç–æ
            const doughIngredients = pizzaData.doughTypes[currentState.doughType].ingredients;
            doughIngredients.forEach(ing => {
                totalCost += (ing.price / ing.baseAmount) * ing.baseAmount * sizeMultiplier;
            });
            
            // –°–æ—É—Å
            const sauceIngredients = pizzaData.sauces[currentState.sauceType].ingredients;
            sauceIngredients.forEach(ing => {
                totalCost += (ing.price / ing.baseAmount) * ing.baseAmount * sizeMultiplier;
            });
            
            // –°—ã—Ä
            const selectedCheeses = pizzaData.cheeses.filter(cheese => 
                currentState.selectedCheeses.includes(cheese.id)
            );
            selectedCheeses.forEach(cheese => {
                totalCost += (cheese.price / cheese.baseAmount) * cheese.baseAmount * sizeMultiplier;
            });
            
            // –ù–∞—á–∏–Ω–∫–∞
            const selectedToppings = pizzaData.toppings.filter(topping => 
                currentState.selectedToppings.includes(topping.id)
            );
            selectedToppings.forEach(topping => {
                totalCost += (topping.price / topping.baseAmount) * topping.baseAmount * sizeMultiplier;
            });
            
            totalCost += 20; // –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Ä–∞—Å—Ö–æ–¥—ã
            
            costTotal.textContent = `~${Math.round(totalCost)} —Ä—É–±`;
        }

        // –û–ë–ù–û–í–õ–ï–ù–ò–ï –¢–ê–ô–ú–ï–†–û–í
        function updateTimers() {
            const doughTimeMinutes = currentState.pizzaSize <= 25 ? 5 : currentState.pizzaSize <= 30 ? 6 : 7;
            const pizzaTimeMinutes = currentState.pizzaSize <= 25 ? 8 : currentState.pizzaSize <= 30 ? 10 : 12;
            
            doughTime.textContent = `${doughTimeMinutes} –º–∏–Ω`;
            pizzaTime.textContent = `${pizzaTimeMinutes} –º–∏–Ω`;
        }

        // –û–ë–ù–û–í–õ–ï–ù–ò–ï –ü–†–û–ì–†–ï–°–°–ê –ü–û–ö–£–ü–û–ö
        function updateProgress() {
            const sizeMultiplier = Math.pow(currentState.pizzaSize / 30, 2);
            const doughIngredients = pizzaData.doughTypes[currentState.doughType].ingredients;
            const sauceIngredients = pizzaData.sauces[currentState.sauceType].ingredients;
            const selectedCheeses = pizzaData.cheeses.filter(cheese => 
                currentState.selectedCheeses.includes(cheese.id)
            );
            const selectedToppings = pizzaData.toppings.filter(topping => 
                currentState.selectedToppings.includes(topping.id)
            );
            
            let total = doughIngredients.length + sauceIngredients.length + 
                       selectedCheeses.length + selectedToppings.length;
            
            let bought = 0;
            
            doughIngredients.forEach(ing => {
                const id = `dough-${ing.id}`;
                if (currentState.boughtIngredients[id]) bought++;
            });
            
            sauceIngredients.forEach(ing => {
                const id = `sauce-${ing.id}`;
                if (currentState.boughtIngredients[id]) bought++;
            });
            
            selectedCheeses.forEach(cheese => {
                const id = `cheese-${cheese.id}`;
                if (currentState.boughtIngredients[id]) bought++;
            });
            
            selectedToppings.forEach(topping => {
                const id = `topping-${topping.id}`;
                if (currentState.boughtIngredients[id]) bought++;
            });
            
            const percentage = total > 0 ? (bought / total) * 100 : 0;
            
            boughtCount.textContent = bought;
            progressFill.style.width = `${percentage}%`;
            progressPercent.textContent = `${Math.round(percentage)}%`;
        }

        // –°–ë–†–û–° –°–ü–ò–°–ö–ê –ü–û–ö–£–ü–û–ö
        resetListBtn.addEventListener('click', function() {
            if (confirm('–í—ã —É–≤–µ—Ä–µ–Ω—ã, —á—Ç–æ —Ö–æ—Ç–∏—Ç–µ —Å–±—Ä–æ—Å–∏—Ç—å —Å–ø–∏—Å–æ–∫ –ø–æ–∫—É–ø–æ–∫?')) {
                currentState.boughtIngredients = {};
                localStorage.removeItem('pizzaBoughtIngredients');
                
                document.querySelectorAll('.ingredient-checkbox').forEach(checkbox => {
                    checkbox.checked = false;
                });
                
                document.querySelectorAll('.ingredients-list li').forEach(li => {
                    li.classList.remove('completed');
                });
                
                updateProgress();
                
                this.innerHTML = '<i class="fas fa-check"></i> –°–ø–∏—Å–æ–∫ —Å–±—Ä–æ—à–µ–Ω!';
                setTimeout(() => {
                    this.innerHTML = '<i class="fas fa-redo"></i> –°–±—Ä–æ—Å–∏—Ç—å —Å–ø–∏—Å–æ–∫ –ø–æ–∫—É–ø–æ–∫';
                }, 1500);
            }
        });

        // –¢–ê–ô–ú–ï–† (—É–ø—Ä–æ—â–µ–Ω–Ω–∞—è –≤–µ—Ä—Å–∏—è)
        function openTimerModal(title, minutes) {
            const modal = document.createElement('div');
            modal.style.cssText = `
                position: fixed;
                top: 0;
                left: 0;
                width: 100%;
                height: 100%;
                background: rgba(0,0,0,0.7);
                display: flex;
                justify-content: center;
                align-items: center;
                z-index: 1000;
            `;
            
            modal.innerHTML = `
                <div style="background: white; padding: 30px; border-radius: 20px; text-align: center; max-width: 400px; width: 90%;">
                    <h2 style="color: var(--pizza-red); margin-bottom: 20px;">${title}</h2>
                    <div id="timer-display" style="font-size: 4rem; font-weight: bold; color: var(--pizza-red); margin: 20px 0;">${minutes}:00</div>
                    <div style="display: flex; justify-content: center; gap: 15px; margin-top: 25px;">
                        <button id="start-timer" style="padding: 12px 25px; background: var(--pizza-red); color: white; border: none; border-radius: 50px; font-weight: bold; cursor: pointer;">
                            –°—Ç–∞—Ä—Ç
                        </button>
                        <button id="close-timer" style="padding: 12px 25px; background: #ddd; color: #333; border: none; border-radius: 50px; font-weight: bold; cursor: pointer;">
                            –ó–∞–∫—Ä—ã—Ç—å
                        </button>
                    </div>
                </div>
            `;
            
            document.body.appendChild(modal);
            
            let timerInterval = null;
            let timerSeconds = minutes * 60;
            let isTimerRunning = false;
            
            const timerDisplay = document.getElementById('timer-display');
            const startTimerBtn = document.getElementById('start-timer');
            const closeTimerBtn = document.getElementById('close-timer');
            
            function updateTimerDisplay() {
                const minutes = Math.floor(timerSeconds / 60);
                const seconds = timerSeconds % 60;
                timerDisplay.textContent = `${minutes}:${seconds.toString().padStart(2, '0')}`;
            }
            
            function startTimer() {
                if (isTimerRunning) return;
                
                isTimerRunning = true;
                startTimerBtn.disabled = true;
                startTimerBtn.textContent = '–ò–¥–µ—Ç...';
                
                timerInterval = setInterval(() => {
                    timerSeconds--;
                    updateTimerDisplay();
                    
                    if (timerSeconds <= 0) {
                        clearInterval(timerInterval);
                        alert('–í—Ä–µ–º—è –≤—ã—à–ª–æ! –ü–∏—Ü—Ü–∞ –≥–æ—Ç–æ–≤–∞!');
                        closeTimer();
                    }
                }, 1000);
            }
            
            function closeTimer() {
                if (timerInterval) {
                    clearInterval(timerInterval);
                }
                document.body.removeChild(modal);
            }
            
            startTimerBtn.addEventListener('click', startTimer);
            closeTimerBtn.addEventListener('click', closeTimer);
            modal.addEventListener('click', function(e) {
                if (e.target === modal) {
                    closeTimer();
                }
            });
        }
    </script>
</body>
</html>
